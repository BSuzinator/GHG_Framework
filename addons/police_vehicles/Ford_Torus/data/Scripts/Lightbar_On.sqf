diag_log "LIGHTS WORKING";
private["_vcl","_lights","_light","_light2","_light3"];
_vcl = _this;
_lights = "\ambulance\textures\light.paa";

_light = "#lightpoint" createVehicle getpos _vcl;
_light2 = "#lightpoint" createVehicle getpos _vcl;
while {alive _vcl} do {
_vcl setObjectTexture [0, "\ambulance\textures\light.paa"];
_light setLightBrightness 0;
_light2 setLightBrightness 0;
_light lightAttachObject [_vcl,[-2,3,-1]]; 
_light2 lightAttachObject [_vcl,[2,-2.5,-0.5]];
_light setLightcolor[0,0,255];
_light2 setLightcolor[255,0,0];
waitUntil {(_vcl getvariable ["PD", false])};
_light setLightBrightness 0.0015;
_light2 setLightBrightness 0.0015;
_vcl setObjectTexture [0, "\ambulance\textures\light.paa"];
sleep 0.3;
_light setLightBrightness 0.08;
_light2 setLightBrightness 0.08;
_light lightAttachObject [_vcl,[-3,3,-1]]; 
_light2 lightAttachObject [_vcl,[3,-3,-0.5]];
sleep 0.1;
_light setLightBrightness 0.011;
_light2 setLightBrightness 0.011;
_light lightAttachObject [_vcl,[-2,3,-1]]; 
_light2 lightAttachObject [_vcl,[2,-3,-0.5]];
sleep 0.3;
_light lightAttachObject [_vcl,[2,3,-1]]; 
_light2 lightAttachObject [_vcl,[-2,-3,-0.5]];
_light setLightcolor[0,0,255];
_light2 setLightcolor[255,0,0];
_light setLightBrightness 0.08;
_light2 setLightBrightness 0.08;
_vcl setObjectTexture [0, "\ambulance\textures\light.paa"];
sleep 0.1;
_light setLightBrightness 0.011;
_light2 setLightBrightness 0.011;
_light lightAttachObject [_vcl,[3,3,-1]];
_light2 lightAttachObject [_vcl,[-3,-3,-0.5]];
sleep 0.3;
_light setLightBrightness 0.08;
_light2 setLightBrightness 0.08;
_light lightAttachObject [_vcl,[2,3,-1]];
_light2 lightAttachObject [_vcl,[-2,-3,-0.5]];
sleep 0.1;
_light lightAttachObject [_vcl,[0,3,-0.5]];
_light2 lightAttachObject [_vcl,[0,-3,-0.5]];
_light setLightcolor[0,0,255];
_light2 setLightcolor[255,0,0];
_light setLightBrightness 0.011;
_light2 setLightBrightness 0.011;
_vcl setObjectTexture [0, "\ambulance\textures\light.paa"];

sleep 0.15;
};

exit;